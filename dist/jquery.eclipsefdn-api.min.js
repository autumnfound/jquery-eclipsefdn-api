/*
 *  jquery-eclipsefdn-api - v0.0.22
 *  Fetch and display data from various Eclipse Foundation APIs.
 *  https://github.com/EclipseFdn/jquery-eclipsefdn-api
 *
 *  Made by Christopher Guindon
 *  Under MIT License
 *
 *  Thanks to https://github.com/jquery-boilerplate/jquery-boilerplate, MIT License Â© Zeno Rocha
 */
!function(a,b,c,d){"use strict";function e(b,c){this.element=b,this.settings=a.extend({},g,c),this._defaults=g,this._name=f,this.init()}var f="eclipseFdnApi",g={apiUrl:"https://api.eclipse.org",gerritUrl:"https://git.eclipse.org/r",eventUrl:"https://events.eclipse.org/data/EclipseEvents.json",forumsUrl:"https://www.eclipse.org/forums",marketplaceUrl:"https://marketplace.eclipse.org",username:"cguindon",currentUser:"",contentPlaceholder:null,errorMsg:'<i class="fa red fa-exclamation-triangle" aria-hidden="true"></i> An unexpected error has occurred.',gerritUserNotFoundMsg:'<h2 class="h3">Outgoing Reviews</h2>There are no outgoing reviews for this user.<h2 class="h3">Incoming Reviews</h2>There are no incoming reviews for this account.',type:"",itemsPerPage:10,accountsUrl:"https://accounts.eclipse.org"};a.extend(e.prototype,{init:function(){var b=["mpFavorites","gerritReviews","recentEvents","forumsMsg","gerritReviewCount","projectsList","errorReports","mailingListSubscription"];"string"===a.type(this.settings.type)&&-1!==a.inArray(this.settings.type,b)&&this[this.settings.type]()},errorReports:function(){function b(b){var c=a("<table></table>").attr({width:"100%",class:"table",id:"aeri-reports"}),d=a("<tr></tr>"),e=a("<th></th>");d.append(e.clone().text("Title").attr("width","50%")),d.append(e.clone().text("Status").attr({width:"10%",class:"text-center"})),d.append(e.clone().text("Resolution").attr({width:"10%",class:"text-center"})),d.append(e.clone().text("Reporters").attr({width:"10%",class:"text-center"})),d.append(e.clone().text("Your First Report").attr({width:"20%",class:"text-center"})),c.append(d);var f=a("<div></div>").attr({class:"table-responsive"});f.append(c),a(i).append(f),a.each(b,function(b,d){var e,f=a("<tr></tr>"),g=a("<td></td>"),h=a("<a></a>"),i=a("<ul></ul>"),j=a("<li></li>");h.attr("target","_blank"),a.each(d.links,function(a,b){"problem"===b.rel&&(e=h.clone().attr({href:b.href}).text(b.title)),"submission"===b.rel&&(b.title||(b.title="(No error message)"),i.append(j.clone().append(h.clone().attr({href:b.href}).html("<small>"+b.title+"</small>"))))}),f.append(g.clone().append(e).append(i).attr({class:"ellipsis white-space-normal",style:"max-width:200px;"})),f.append(g.clone().text(d.status).attr("class","text-center")),f.append(g.clone().text(d.resolution).attr("class","text-center"));var k=a("<span></span>").attr("class","badge");k.text(d.numberOfReporters),f.append(g.clone().append(k).attr("class","text-center"));var l=new Date(d.firstReported),m=l.getMonth()<10?"0"+l.getMonth():l.getMonth(),n=l.getDate()<10?"0"+l.getDate():l.getDate(),o=l.getFullYear()+"-"+m+"-"+n;f.append(g.clone().text(o).attr("class","text-center")),c.append(f)})}function d(b,c){"boolean"!=typeof c&&(c=!1),void 0===b&&(b=h.settings.errorMsg),c&&(b=h.settings.errorMsg+b);var d=a("<p></p>").append(b);a(h.element).append(d)}function e(a,b,c){f(b,c)}function f(b,d){void 0===b&&(b=1),void 0===d&&(d=h.settings.itemsPerPage),q.path=o+g+p+"?page="+b+"&size="+d,q.successCallback=function(a){addReportRows(a)},a(c).eclipseFdnIgc.makeRequest(q)}var g,h=this,i=h.element,j=!1,k="Unable to retrieve account information required to process this request.",l="Authorization to retrieve error reports was denied.",m=h.settings.apiUrl+"/account/profile/"+h.settings.username,n={clientName:"aeriReports",apiUrl:"https://dev.eclipse.org",completeOnAuthorization:!1,username:h.settings.username,encodeStorage:!0},o="/recommenders/community/aeri/v2/api/v1/reporters/",p="/problems",q={path:"",method:"GET",cid:"aeri_reports",scope:"eclipse_aeri_view_own_report email openid",successCallback:"",errorCallback:function(a){switch(a.status){case 404:d("No submissions found.");break;default:d()}}};a(c).on("igcAuthFailed",function(a,b){b.clientName===n.clientName&&(d(l),j=!0)}),a(i).eclipseFdnIgc(n),j||a.ajax({url:m,context:h.element}).done(function(f){return void 0===f.mail?void d(k,!0):(g=f.mail,j?void d(l):(q.path=o+g+p+"?page=1&size="+h.settings.itemsPerPage,q.successCallback=function(c,d,f){b(c);var g=new h.linkHeaderParser(f.getResponseHeader("Link")),j=g.getLastPageNum();g.getPageSize()!==h.settings.itemsPerPage&&(h.settings.itemsPerPage=g.getPageSize()),a("#aeri-reports").on("fetchPageItemsEvent",e),a("#aeri-reports").data("postsPerPage",h.settings.itemsPerPage),a(i).append(h.getPaginationBar(j*h.settings.itemsPerPage,"aeri-reports"))},void a(c).eclipseFdnIgc.makeRequest(q)))}).fail(function(){d(k,!0)})},projectsList:function(){var b=this,c=this.settings.username,e=this.settings.apiUrl;if(!c&&!api_url)return!1;var f=e+"/account/profile/"+c+"/projects";a.ajax(f,{context:this.element,success:function(c){var e=Object.keys(c).length;if(e===d&&(e=0),a(this).children("strong").text(e+b.plurialString(" project",e)),!(b.settings.contentPlaceholder instanceof jQuery))return!1;var f=a(b.settings.contentPlaceholder),g=a("<a></a>");f.append(a("<h2></h2>").addClass("h3").text("Eclipse Projects")),f.append('<p>Projects are the organizational unit for open source development work at the Eclipse Foundation. Projects have developers (committers), source code repositories, build servers, downloads, and other resources. The Eclipse Foundation\'s open source projects are governed by the <a href="https://eclipse.org/projects/dev_process/">Eclipse Development Process</a>.</p>');var h="This user is";if(b.settings.currentUser===b.settings.username&&(h="You are"),0===e)return f.append('<div class="alert alert-warning" role="alert">'+h+" not involved in any Eclipse Projects.</div>"),!1;var i=a("<table></table>").attr({width:"100%",class:"table"}),j=a("<tr></tr>"),k=a("<th></th>"),l=a("<td></td>");j.append(k.clone().text("Project").attr("width","85%")),j.append(k.clone().text("Relation").attr({width:"15%",class:"text-center"})),i.append(j),a.each(c,function(c,d){var e=[],f="",h="";a.each(d,function(a,b){e.push(b.Relation.Description),f=b.ProjectName,h=b.ActiveDate,""!==b.url&&(f=g.clone().attr({href:b.url}).text(f))}),j=a("<tr></tr>"),j.append(l.clone().html(f).append("<br/><small>Since: "+b.dateFormat(new Date(h))+"</small>")),j.append(l.clone().text(e.join(", ")).attr("class","text-center")),i.append(j)});var m=a("<div></div>").attr({class:"table-responsive"});m.append(i),f.append(m)},error:function(){a(this).html(b.settings.errorMsg)}})},forumsMsg:function(){function b(b){var c=a("#forum-posts");a.each(b.posts,function(d,e){var g={forum_id:e.thread_forum_id,forum_name:e.forum_name,forum_cat_id:e.forum_name,forum_cat_name:e.cat_name,root_subject:e.root_msg_subject,current_user_last_post_timestamp:e.msg_group_post_stamp,current_user_last_post_subject:e.last_user_msg_subject,thread_id:e.msg_thread_id,thread_reply_count:e.thread_replies,thread_views_count:e.thread_views,thread_last_post_date:e.thread_last_post_date,last_message_timestamp:e.last_msg_post_stamp,last_message_poster_id:e.last_msg_poster_id,last_message_poster_alias:e.last_poster_alias,last_message_last_view:e.read_last_view,current_user_id:b.id},h=a("<tr></tr>"),i=a("<td></td>"),j=a("<a></a>"),k=j.clone().attr({href:f.settings.forumsUrl+"/index.php/f/"+g.forum_id+"/"}).text(g.forum_name),l=j.clone().attr({href:f.settings.forumsUrl+"/index.php/i/"+g.forum_cat_id+"/"}).text(g.forum_cat_name),m=a("<small></small>").append("<br/>").append(l).append(" &gt; ").append(k).append(" &gt; ").append(g.root_subject).append("<br>Posted on "+f.dateFormat(new Date(parseInt(1e3*g.current_user_last_post_timestamp)))),n="fa fa-envelope-open-o";f.settings.currentUser===f.settings.username&&g.last_message_last_view<g.thread_last_post_date&&g.last_message_poster_id!==g.current_user_id&&(h.addClass("warning"),n="fa fa-envelope-o"),f.settings.currentUser===f.settings.username&&h.append(i.clone().html('<i class="'+n+'" aria-hidden="true"></i>').attr("class","text-center")),h.append(i.clone().html(j.clone().attr({href:f.settings.forumsUrl+"/index.php/t/"+g.thread_id+"/"}).text(g.current_user_last_post_subject)).append(m)),h.append(i.clone().text(g.thread_reply_count).attr("class","text-center")),h.append(i.clone().text(g.thread_views_count).attr("class","text-center"));var o=a("<small></small>").append(f.dateFormat(new Date(parseInt(1e3*g.last_message_timestamp)))).append("<br/> By: ").append(j.clone().attr({href:f.settings.forumsUrl+"/index.php/sp/"+g.last_message_poster_id+"/"}).text(g.last_message_poster_alias));h.append(i.clone().html(o).attr("class","text-center")),c.append(h)})}function c(a,b,c){e(b,c)}function e(c,d){void 0===c&&(c=1),void 0===d&&(d=f.settings.itemsPerPage);var e=h+"/account/profile/"+g+"/forum?page="+c+"&pagesize="+d;a.ajax(e,{context:f.element,success:function(a){b(a)},error:function(){a(this).html(f.settings.errorMsg)}})}var f=this,g=this.settings.username,h=this.settings.apiUrl;if(!g&&!api_url)return!1;var i=h+"/account/profile/"+g+"/forum?page=1&pagesize="+f.settings.itemsPerPage;a.ajax(i,{context:this.element,success:function(e,g,h){var i=0;if(e.posted_msg_count!==d&&(i=e.posted_msg_count,a(this).attr({href:f.settings.forumsUrl+"/index.php/sp/"+e.id+"/"})),a(this).children("strong").text(i+f.plurialString(" topic",i)),!(f.settings.contentPlaceholder instanceof jQuery))return!1;var j=a(f.settings.contentPlaceholder),k=a("<a></a>");j.append(a("<h2></h2>").addClass("h3").text("Eclipse Forums")),j.append(a("<p></p>").append("The Eclipse forums are your way of communicating with the community of people developing and using Eclipse-based tools hosted at Eclipse.org. Please stick to technical issues - and remember, no confidential information - these are public forums!"));var l=k.clone().attr({href:f.settings.forumsUrl,class:"btn btn-primary btn-sm",style:"display:block"}).html('<i class="fa fa-angle-double-right" aria-hidden="true"></i> More');if(0===e.length)return j.append('<div class="alert alert-warning" role="alert">This user does not have any activities on Eclipse Forums.</div>'),j.append(l),!1;var m=a("<table></table>").attr({width:"100%",class:"table",id:"forum-posts"}),n=a("<tr></tr>"),o=a("<th></th>");f.settings.currentUser===f.settings.username&&n.append(o.clone().attr("width","8%")),n.append(o.clone().text("Topics").attr("width","50%")),n.append(o.clone().text("Replies").attr({width:"8%",class:"text-center"})),n.append(o.clone().text("Views").attr({width:"8%",class:"text-center"})),n.append(o.clone().text("Last message").attr({class:"text-center"})),m.append(n);var p=a("<div></div>").attr({class:"table-responsive"});p.append(m),j.append(p),b(e);var q=new f.linkHeaderParser(h.getResponseHeader("Link")),r=q.getLastPageNum();q.getPageSize()!==f.settings.itemsPerPage&&(f.settings.itemsPerPage=q.getPageSize()),m.on("fetchPageItemsEvent",c),m.data("postsPerPage",f.settings.itemsPerPage),j.append(f.getPaginationBar(r*f.settings.itemsPerPage,"forum-posts"));var s=e.id;l.attr({href:f.settings.forumsUrl+"/index.php/sp/"+s+"/"}),j.append(l)},error:function(){a(this).html(f.settings.errorMsg)}})},mpFavorites:function(){function b(b){var c=e.settings.marketplaceUrl+"/node/"+b+"/api/p";a.ajax(c,{context:e.element,success:function(b){var c=a("#mpfavorites-list");a("node",b).each(function(b,d){var f=a(d),g=f.find("shortdescription").text(),h=d.getAttribute("name"),i=f.find("changed").text(),j=f.find("owner").text(),k="Last Updated on "+e.dateFormat(new Date(parseInt(1e3*i)))+" by "+j,l=d.getAttribute("id"),m=a("#mp-listing-template").clone().removeClass("hidden").removeAttr("id"),n=a("<a></a>"),o=a("category",d),p=e.settings.marketplaceUrl+"/node/"+l,q=f.find("image").text(),r=n.clone().attr({href:p});o.each(function(a,b){var c=n.clone().attr({href:b.getAttribute("url")}).text(b.getAttribute("name"));o.length!==a+1&&c.append(", "),m.find(".content-categories").append(c)}),m.find(".listing-image").attr({href:p,style:"background:url('"+q+"') no-repeat center;"}),m.find(".drag").attr({href:e.settings.marketplaceUrl+"/marketplace-client-intro?mpc_install="+l}),m.find(".listing-title").html(r.clone().text(h)),m.find(".content-teaser").html(g),m.find(".content-last-updated").html(k),c.append(m)})},error:function(){a(this).html(e.settings.errorMsg)}})}function c(a,b,c){d(b,c)}function d(c,d){void 0===c&&(c=1),void 0===d&&(d=e.settings.itemsPerPage);var h=g+"/marketplace/favorites?name="+f+"&page="+c+"&pagesize="+d;a.ajax(h,{context:e.element,success:function(c){var d=[];a.each(c.mpc_favorites,function(a,b){d.push(b.content_id)}),b(d.join())},error:function(){a(this).html(e.settings.errorMsg)}})}var e=this,f=this.settings.username,g=this.settings.apiUrl;if(!f&&!api_url)return!1;if(e.settings.contentPlaceholder instanceof jQuery){var h=a(e.settings.contentPlaceholder),i=a("<a></a>").attr({href:e.settings.marketplaceUrl+"/user/"+f+"/favorites",class:"btn btn-primary btn-sm",style:"display:block"}).html('<i class="fa fa-angle-double-right" aria-hidden="true"></i> More');h.append(a("<h2></h2>").addClass("h3").text("Eclipse Marketplace Favorites")),h.append(a("<p></p>").append("Eclipse Marketplace is the source for Eclipse-based solutions, products and add-on features. Thousands of developers visit Marketplace on a monthly basis to find new and innovative solutions. Solution providers are encouraged to list their products on Marketplace to gain exposure to the Eclipse developer community."))}var j=g+"/marketplace/favorites?name="+f+"&page=1&pagesize="+e.settings.itemsPerPage;a.ajax(j,{context:this.element,success:function(d,f,g){if(a(this).children("strong").text(d.result.count+e.plurialString(" favorite",d.result.count)),void 0===h)return!1;var j=[];if(a.each(d.mpc_favorites,function(a,b){j.push(b.content_id)}),0===j.length)return h.append('<div class="alert alert-warning" role="alert">There are no marketplace favorites for this user.</div>'),h.append(i),!1;var k=new e.linkHeaderParser(g.getResponseHeader("Link")),l=k.getLastPageNum();k.getPageSize()!==e.settings.itemsPerPage&&(e.settings.itemsPerPage=k.getPageSize()),h.on("fetchPageItemsEvent",c),h.append('<h3 id="mpc_list_name">'+d.mpc_list_name+"</h3>"),h.append('<div class="row"><div class="col-md-17"><div class="form-item form-type-textfield form-disabled"><label>Favorites URL <a href="#" class="install-user-favorites" data-container="body" data-toggle="popover" data-placement="top" title="" data-original-title="How to install?"><i class="fa fa-question-circle" aria-hidden="true"></i></a> </label><input disabled="true" class="form-control form-text" type="text" value="http://marketplace.eclipse.org/user/'+e.settings.username+'/favorites" size="60" maxlength="128"></div></div><div class="col-md-7 margin-top-25 text-right"><div class="drag_installbutton drag_installbutton_v2 drag-install-favorites"><a href="http://marketplace.eclipse.org/user/'+e.settings.username+'/favorites" class="drag" title="How to install?"><span class="btn btn-default"><i class="fa fa-download orange"></i> Install Favorites</span><div class="tooltip tooltip-below-right"><h3>Drag to Install!</h3>Drag to your running Eclipse<sup>*</sup> workspace to install this favorite list. <br><sup>*</sup>Requires Eclipse Marketplace Client.</div></a></div></div></div>'),h.append('<div id="mpfavorites-list"></div>'),h.find("#mpfavorites-list").data("postsPerPage",e.settings.itemsPerPage),b(j.join()),h.append(e.getPaginationBar(l*e.settings.itemsPerPage,"mpfavorites-list")),h.append(i),a("a.install-user-favorites").on("click",function(a){a.preventDefault()}),a("a.install-user-favorites").popover({html:!0,content:function(){return a("<ol></ol>").addClass("padding-left-20").append("<li>Copy <strong>URL</strong> from textfield.</li>").append("<li>Open Eclipse Marketplace Client (MPC).</li>").append("<li>Open <strong>Favorites</strong> tab.</li>").append("<li>Click on <strong>Import Favorites list</strong>.</li>").append("<li>Paste <strong>URL</strong> in the textfield.</li>")}})},error:function(){a(this).html(e.settings.errorMsg)}})},gerritReviewCount:function(){var b=this,c=this.settings.username,d=this.settings.apiUrl,e=d+"/account/profile/"+c+"/gerrit";a.ajax(e,{context:this.element,success:function(c){var d=c.merged_changes_count;a(this).children("strong").text(d+b.plurialString(" review",d)),d>0&&a(this).attr({href:b.settings.gerritUrl+"/#/q/owner:"+b.settings.username})},error:function(){a(this).html(b.settings.errorMsg)}})},mailingListSubscription:function(){var b=this,c=b.settings.username,d=b.settings.currentUser,e=b.settings.currentUserUid,f=b.settings.userCanEditOwnMailingList,g=this.settings.apiUrl;if(!c&&!api_url)return!1;var h=b.element,i=g+"/account/profile/"+c+"/mailing-list";a.ajax(i,{context:this.element,success:function(b){var g=b.mailing_list_subscriptions,i=a("<p></p>"),j=a("<h2></h2>"),k=a("<a></a>"),l=a("<strong></strong>"),m="This user is";d===c&&(m="You are");var n=k.clone().attr({href:"/user/"+e+"/mailing-list",class:"fa fa-pencil","aria-hidden":"true"});if(a(h).append(j.text("Eclipse Mailing Lists ").append(n)),jQuery.isEmptyObject(g))a(h).append(i.clone().text(m+" not subscribed to any Eclipse mailing list."));else{a(h).append(i.clone().text("The Eclipse Mailing lists are another way for you to interact with your favorite Eclipse project.")),a(h).append(i.clone().text("Below is a list of the public mailing lists that "+m.toLowerCase()+" currently  subscribed to at Eclipse.org. When posting emails to our mailing lists, please remember that these lists are public, avoid posting ").append(l.clone().text("personal")).append(" or ").append(l.clone().text("private information")).append(".")),a(h).append(i.clone().text("If you are having trouble using our mailing lists, please contact ").append(k.clone().attr("href","mailto:mailman@eclipse.org").text("mailman@eclipse.org")).append("."));var o=a("<table></table>").attr({width:"100%",class:"table",id:"aeri-reports"}),p=a("<tr></tr>"),q=a("<th></th>");p.append(q.clone().text("Mailing List").attr("width","30%")),p.append(q.clone().text("Description").attr("width","70%")),o.append(p);var r=a("<div></div>").attr({class:"table-responsive"});r.append(o),a(h).append(r),a(h).append(i),a.each(g,function(b,c){var d=a("<tr></tr>"),e=a("<td></td>");d.append(e.clone().append(k.clone().attr("href","/mailing-list/"+c.list_name).text(c.list_name))),d.append(e.clone().append(c.list_description)),o.append(d)})}d===c&&f&&a(h).append(i.clone().append(k.clone().attr({href:"/user/"+e+"/mailing-list",class:"btn btn-primary btn-xs"}).text("Manage your Mailing Lists")))},error:function(){a(this).html(b.settings.errorMsg)}})},gerritReviews:function(){function b(b){function d(){function b(b,d){var e=a("<table></table>").attr({width:"100%",class:"table",id:b}),f=a("<tr></tr>"),g=a("<th></th>"),h=a("<td></td>");f.append(g.clone().text("Subject").attr("width","70%")),f.append(g.clone().text("Status").attr({width:"18%",class:"text-center"})),f.append(g.clone().text("Updated").attr({width:"12%",class:"text-center"})),e.append(f);var i=a("<a></a>");a.each(d,function(b,d){f=a("<tr></tr>");var g="";!1===d.mergeable&&(g="Merge Conflict",f.addClass("warning"));var j=d.updated.substring(0,d.updated.indexOf(" "));f.append(h.clone().html(i.clone().attr({href:c.settings.gerritUrl+"/"+d._number}).text(d.subject)).append("<br/>"+d.project)),f.append(h.clone().text(g).attr("class","text-center")),f.append(h.clone().text(j).attr("class","text-center")),e.append(f)});var j=a("<div></div>").attr({class:"table-responsive"});return j.append(e),j}a.each(g,function(d,e){var f="";switch(e[0]){case"gerrit-outgoing":f="Outgoing Reviews";break;case"gerrit-incoming":f="Incoming Reviews"}var g=a("<h4></h4>").addClass("h4").text(f);if(a(c.element).append(g),0===e[1].length)return void a(c.element).append('<div class="alert alert-warning" role="alert">There are no '+f.toLowerCase()+" for this user.</div>");a(c.element).append(b(e[0],e[1])),a(c.element).append(c.getPaginationBar(e[1].length,e[0]))});var d=a("<a></a>").attr({href:c.settings.gerritUrl+"/#/q/owner:"+c.settings.username,class:"btn btn-primary btn-sm",style:"display:block"}).html('<i class="fa fa-angle-double-right" aria-hidden="true"></i> More');a(c.element).append(d)}function e(b,d,h){return d=void 0!==d?d:100,h=void 0!==h?h:0,b+="&start="+h+"&n="+d,a.ajax(b,{dataType:"gerrit_XSSI",context:c.element,converters:{"text gerrit_XSSI":function(a){var b=a.substring(a.indexOf("\n")+1);return jQuery.parseJSON(b)}},success:function(f){var i=Object,j=Object;0!==f[0].length&&(a.merge(g[0][1],f[0]),i=f[0][f[0].length-1]),0!==f[1].length&&(a.merge(g[1][1],f[1]),j=f[1][f[1].length-1]),"_more_changes"in i&&!0===i._more_changes||"_more_changes"in j&&!0===j._more_changes?e(b,d,h+d):a(c.element).trigger("drawTableEvent")},error:function(b){400===b.status?a(this).html(c.settings.gerritUserNotFoundMsg):a(this).html(c.settings.errorMsg),f=!0}})}var f=!1,g=[["gerrit-outgoing",[]],["gerrit-incoming",[]]];a(c.element).on("drawTableEvent",d),e(b,100,0)}var c=this,d=this.settings.gerritUrl+"/changes/?q=owner:"+this.settings.username+"+status:open&q=reviewer:"+this.settings.username+"+status:open+-owner:"+this.settings.username+"&pp=0";a(this.element).append(a("<h2>Eclipse Gerrit</h2>").addClass("h3")),a(this.element).append("<p>Gerrit is a web based code review system, facilitating online code reviews for projects using the Git version control system.</p>"),b(d)},recentEvents:function(){function b(a,b){return a.dateTime-b.dateTime}var c=this;a.ajax(this.settings.eventUrl,{context:this.element,success:function(d){var e=new Date,f=[];for(var g in d.events)d.events[g].dateTime=new Date(d.events[g].date),d.events[g].dateTime>=e&&f.push(d.events[g]);f.sort(b);var h=a("<ul></ul>").attr({class:"nav",style:"margin:0"});for(var i in f.slice(0,5)){var j=f[i].dateTime,k=c.dateFormat(j),l=a("<a>").attr({href:f[i].infoLink}).html(f[i].title+"<br/><small>"+k+"</small>"),m=a("<li></li>").append(l);h.append(m)}a(this).children(".loading").remove(),a(this).append(h);var n=a("<a>").attr({href:"http://events.eclipse.org",class:"btn btn-simple btn-sm"}).text("more");a(this).append(n)},error:function(){a(this).html(c.settings.errorMsg)}})},plurialString:function(a,b){return b>1&&(a+="s"),a},dateFormat:function(a){var b=["January","February","March","April","May","June","July","August","September","October","November","December"],c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d=a.getFullYear(),e=b[a.getMonth()];return c[a.getDay()]+", "+e+" "+a.getDate()+", "+d+" - "+("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2)},linkHeaderParser:function(a){function b(a,b){if(void 0===b||void 0===a)return 0;for(var c=a.substr(a.lastIndexOf("?")+1),d=c.split("&"),e=0;e<d.length;e++){var f=d[e].split("=");if(decodeURIComponent(f[0])===b)return decodeURIComponent(f[1])}return 0}var c=this;if(this.links=0,this.getLastPageNum=function(){return void 0===c.links.last?0:b(c.links.last,"page")},this.getPageSize=function(){if(void 0===c.links.first)return 0;var a=b(c.links.first,"pagesize");return 0===a?b(c.links.first,"size"):a},void 0!==a&&null!==a){for(var d=a.split(","),e={},f=0;f<d.length;f++){d[f]=d[f].replace("&amp;","&");var g=d[f].split(";");if(!(g.length<2)){var h=g[0].replace(/<(.*)>/,"$1").trim();e[g[1].replace(/rel="(.*)"/,"$1").trim()]=h}}this.links=e}},getPaginationBar:function(b,c){function d(b,c,d){var f=a("<li></li>"),g=a("<ul></ul>").addClass("pagination");void 0!==d&&g.attr({"data-eclipseFdnApi-elementID":d});var h=!1,i="",j=1,k=b,l=function(){var b=a(this),c=b.attr("data-goto-page"),d=b.parents(".pagination").eq(0),e=d.data("eclipsefdnapiElementid");a("#"+e).trigger("changePageEvent",[c])};if(b>9){j=b-8,c<=5?(k=9,j=1):c<=b-4&&(j=c-4,k=c+4),h=!0;var m=a("<span></span>");i=f.clone().append(m.clone().html("...").attr({"aria-hidden":"true"})).addClass("pager-ellipses disabled")}1!==c&&(g.append(f.clone().addClass("pager-first").html(e("First","first page",1,"<< first").on("click",l))),g.append(f.clone().html(e("Previous","previous page",c-1,"< previous").on("click",l))),!0===h&&j>1&&g.append(i.clone()));var n;for(n=j;n<=k;n++){var o=f.clone(),p=e("Page "+parseInt(n),"page "+parseInt(n),n).on("click",l);c===n&&o.addClass("active"),o.html(p),g.append(o)}return c<b&&(!0===h&&k<b&&g.append(i.clone()),g.append(f.clone().html(e("Next","next page",c+1,"next >").on("click",l))),g.append(f.clone().addClass("pager-last").html(e("Last","last page",b,"last >>").on("click",l)))),g}function e(b,c,d,e){return void 0===e&&(e=parseInt(d)),a("<a></a>").attr({"aria-label":b,href:"#",onclick:"return false;",title:"Go to "+c,"data-goto-page":parseInt(d)}).text(e)}function f(){function b(b){var c=0,e=0,f=[],g=[];switch(d){case"gerrit":case"table":g[0]=b[0]}return a.each(b,function(b,d){if(a(d).children().first().is("th"))return!0;c===h.settings.itemsPerPage&&(c=0,g[++e]=f,f=[]),f[c++]=d}),f.length>0&&(g[++e]=f),g}var d,e=a("#"+c),f=[];switch(c){case"gerrit-incoming":case"gerrit-outgoing":d="gerrit",f=b(e.find("tr"));break;case"mpfavorites-list":d="mpfav";break;case"forum-posts":case"aeri-reports":d="table",f=b(e.find("tr"));break;default:d="generic"}switch(e.data("pageCache",f),e.data("pageCacheType",d),e.data("pageCacheTotalPages",k),e.on("changePageEvent",g),d){case"gerrit":e.trigger("changePageEvent",[1])}}function g(b,c){function e(){if(g.empty(),void 0===i[c]){var b=[];switch(h){case"mpfav":case"table":b.push(c),b.push(g.data("postsPerPage"))}return g.is("table")&&g.append(i[0]),void g.trigger("fetchPageItemsEvent",b)}g.is("table")&&g.append(i[0]),a.each(i[c],function(a,b){g.append(b)})}function f(){if(void 0===i[l]){var b=[];i[l]=[],g.is("table")?b=g.find("tr"):g.is("div")&&(b=g.find(".node")),a.each(b,function(b,c){if(a(c).children().first().is("th"))return!0;i[l].push(c)}),g.data("pageCache",i)}}var g=a(b.currentTarget),h=g.data("pageCacheType"),i=g.data("pageCache"),j=g.attr("id"),k=a("#"+j+"-pager"),l=k.data("currentPage");switch(void 0!==l&&null!==l||(l=1),void 0===c&&(c=1),c=parseInt(c),h){case"gerrit":e();break;default:f(),e()}if(l!==c){var m=g.data("pageCacheTotalPages"),n=d(m,c,j);k.find("ul").replaceWith(n),k.data("currentPage",c)}}var h=this;if(void 0===b&&(b=1),!(b<=0||b<=h.settings.itemsPerPage)){var i=1,j=a("<nav></nav>").attr({"arial-label":"Page navigation",id:c+"-pager"}).addClass("text-center"),k=Math.ceil(b/h.settings.itemsPerPage),l=d(k,i,c);return j.append(l),void 0===a("#"+c).data("pageCache")&&f(),j}}}),a.fn[f]=function(b){return this.each(function(){a.data(this,"plugin_"+f)||a.data(this,"plugin_"+f,new e(this,b))})}}(jQuery,window,document);